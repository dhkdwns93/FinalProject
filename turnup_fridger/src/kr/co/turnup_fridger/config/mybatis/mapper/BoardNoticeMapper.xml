<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="kr.co.turnup_fridger.config.mybatis.mapper.BoardNoticeMapper">
	
	<!-- 
			boardNotice 테이블 관련 mapper
			+ boardNotice 등록
			+ boardNotice 수정
			+ boardNotice 삭제
			+ boardNotice 조회
	 -->
	<!-- boardNotice 기본 조회 sql -->
	<sql id="boardNotice-select-sql">
		SELECT BOARD_NOTICE_ID, BOARE_NOTICE_ITEMS, BOARD_NOTICE_TITLE, 
		       BOARD_NOTICE_TXT, BOARD_NOTICE_IMG, BOARD_NOTICE_DATE
		FROM BOARD_NOTICE
	</sql>
	
	<!-- ResultMap 등록 -->
	<resultMap id="boardNotice-resultmap" type="boardNotice">
		<id column="BOARD_NOTICE_ID" property="id"/>
		<result column="BOARE_NOTICE_ITEMS" property="items"/>
		<result column="BOARD_NOTICE_TITLE" property="title"/>
		<result column="BOARD_NOTICE_TXT" property="txt"/>
		<result column="BOARD_NOTICE_IMG" property="img" />
		<result column="BOARD_NOTICE_DATE" property="date"/>
	</resultMap>
	
	<!-- 등록 SQL -->
	<insert id="insertBoardNotice" parameterType="boardNotice">
		<selectKey resultType="_int" keyProperty="id" order="BEFORE">
			select BOARD_NOTICE_ID.nextval from dual
		</selectKey>
		INSERT INTO BOARD_NOTICE
		VALUES(
				#{id},
				#{items},
				#{title},
				#{txt},
				#{img},
				sysdate
			   )	
	</insert>
	
	
	<!-- 업데이트 SQL -->
	<update id="updateBoardNotice" parameterType="boardNotice">
		UPDATE 	BOARD_NOTICE 
		SET		BOARE_NOTICE_ITEMS = #{items},
				BOARD_NOTICE_TITLE = #{title},
				BOARD_NOTICE_TXT = #{txt},
				BOARD_NOTICE_IMG = #{img},
				BOARD_NOTICE_DATE = SYSDATE
		WHERE	BOARD_NOTICE_ID = #{id}
	</update>
	
	
	<!-- 삭세 SQL-->
	<delete id="deleteBoardNotice" parameterType="_int">
		DELETE FROM BOARD_NOTICE WHERE BOARD_NOTICE_ID = #{id}
	</delete>
	
	<!-- 조회 SQL -->
	
	
	<!-- LIST 전체 조회 SQL -->
	<select id="selectBoardNoticeList" resultMap = "boardNotice-resultmap">
		<include refid="boardNotice-select-sql"/>
		ORDER BY BOARD_NOTICE_DATE DESC
	</select> 
	
	<!-- LIST 중에서 ID로 조회하는 SQL -->
	<select id="selectBoardNoticeById" parameterType="_int" resultMap="boardNotice-resultmap">
		<include refid="boardNotice-select-sql"/>
		WHERE BOARD_NOTICE_ID = #{id}
		ORDER BY BOARD_NOTICE_DATE DESC
	</select>
	
	<!-- LIST 중에서 ITEMS로 조회하는 SQL  -->
	<select id="selectBoardNoticeByItems" parameterType="string" resultMap="boardNotice-resultmap">
		<include refid="boardNotice-select-sql"/>
		WHERE BOARE_NOTICE_ITEMS = #{items}
		ORDER BY BOARD_NOTICE_DATE DESC
	</select>
	
</mapper>